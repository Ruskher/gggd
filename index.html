<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>BOOST SAVES | GEO SAMA</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <style>
    body {
      background: #111;
      color: #19ff19;
      font-family: 'Montserrat', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
    }
    .container {
      max-width: 400px;
      margin: 40px auto;
      background: #181818;
      border-radius: 20px;
      padding: 32px 20px 20px 20px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
      text-align: center;
    }
    .avatar {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      margin: 0 auto 18px auto;
      display: block;
      border: 4px solid #222;
      background: #232323;
    }
    h1 {
      font-size: 1.3em;
      margin: 0 0 28px 0;
      color: #19ff19;
      letter-spacing: 2px;
      font-weight: 600;
    }
    .form-box {
      background: #111;
      border: 2px solid #19ff19;
      border-radius: 14px;
      padding: 26px 14px 18px 14px;
      margin-bottom: 30px;
    }
    .input-group {
      margin-bottom: 18px;
    }
    input[type="text"], input[type="number"] {
      width: 95%;
      padding: 12px;
      border-radius: 7px;
      border: none;
      background: #232323;
      color: #fff;
      font-size: 1em;
      outline: none;
      margin-bottom: 10px;
      box-sizing: border-box;
      border: 2px solid #222;
      transition: border 0.2s;
    }
    input[type="text"]:focus, input[type="number"]:focus {
      border: 2px solid #19ff19;
    }
    button {
      width: 98%;
      padding: 13px 0;
      background: #111;
      color: #19ff19;
      border: 2px solid #19ff19;
      border-radius: 7px;
      font-size: 1.05em;
      font-weight: 600;
      letter-spacing: 1px;
      cursor: pointer;
      margin-top: 10px;
      transition: background 0.2s, color 0.2s;
    }
    button:hover {
      background: #19ff19;
      color: #111;
    }
    .balance-box {
      background: #111;
      border: 2px solid #19ff19;
      border-radius: 14px;
      padding: 18px 10px;
      margin-top: 28px;
      color: #fff;
      text-align: left;
      font-size: 1em;
    }
    .balance-label {
      color: #bbb;
      font-size: 0.98em;
      margin-right: 6px;
    }
    .balance-value {
      color: #ffd700;
      font-weight: bold;
    }
    .rate-value {
      color: #19ff19;
      font-weight: bold;
    }
    @media (max-width: 440px) {
      .container { padding: 22px 2vw 14px 2vw; }
      .avatar { width: 90px; height: 90px;}
    }
  </style>
</head>
<body>
  <div class="container">
    <img src="https://placehold.co/120x120?text=Avatar" alt="Avatar" class="avatar">
    <h1>BOOST SAVES | GEO SAMA</h1>
    <form class="form-box" id="boostForm">
      <div class="input-group">
        <input type="text" id="tiktokLink" placeholder="Enter Tiktok Link" required>
      </div>
      <div class="input-group">
        <input type="number" id="amount" placeholder="Enter Amount | Max 1B" min="1" max="1000000000" required>
      </div>
      <button type="submit">BOOST</button>
    </form>
    <div class="balance-box">
      <div>
        <span class="balance-label">YOUR BALANCE :</span>
        <span class="balance-value" id="balance">1.5200000 PHP</span>
      </div>
      <div>
        <span class="balance-label">RATE COINS :</span>
        <span class="rate-value" id="rate">0.002 PHP</span>
      </div>
    </div>
    <div id="transactionResult" style="margin-top:22px;font-size:1.07em;"></div>
  </div>
  <script>
    let balance = 1.52;
    const rate = 0.002;

    document.getElementById('boostForm').addEventListener('submit', async function(e) {
      e.preventDefault();
      const tiktokLink = document.getElementById('tiktokLink').value.trim();
      const amount = parseInt(document.getElementById('amount').value, 10);
      const resultDiv = document.getElementById('transactionResult');
      resultDiv.textContent = "";
      resultDiv.style.color = "#19ff19";

      if (!tiktokLink.match(/^https:\/\/(www\.)?tiktok\.com\//)) {
        resultDiv.style.color = "red";
        resultDiv.textContent = "Please enter a valid TikTok link!";
        return;
      }
      if (isNaN(amount) || amount < 1 || amount > 1000000000) {
        resultDiv.style.color = "red";
        resultDiv.textContent = "Enter a valid amount (1 - 1,000,000,000)!";
        return;
      }

      // Send to backend API
      try {
        const res = await fetch('/api/boost', {
          method: 'POST',
          headers: {'Content-Type': 'application/json'},
          body: JSON.stringify({ tiktokLink, amount })
        });

        const data = await res.json();

        if (!res.ok) {
          resultDiv.style.color = "red";
          resultDiv.textContent = data.message || "Transaction failed";
          return;
        }

        balance = data.newBalance;
        document.getElementById('balance').textContent = balance.toFixed(7) + ' PHP';
        resultDiv.innerHTML = `
          <b>Transaction Success!</b><br>
          TikTok: <span style="color:#ffd700">${data.tiktokLink}</span><br>
          Amount: <span style="color:#ffd700">${data.amount}</span><br>
          Cost: <span style="color:#ffd700">${data.totalCost.toFixed(7)} PHP</span><br>
          New Balance: <span style="color:#ffd700">${data.newBalance.toFixed(7)} PHP</span>
        `;
        document.getElementById('boostForm').reset();
      } catch (err) {
        resultDiv.style.color = "red";
        resultDiv.textContent = "Server error. Please try again.";
      }
    });
  </script>
</body>
</html>
